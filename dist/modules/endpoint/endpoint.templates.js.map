{"version":3,"sources":["../../../src/modules/endpoint/endpoint.templates.ts"],"sourcesContent":["export const endpointsTemplate = (appName: string) => `// This file is auto-generated. Do not edit manually.\r\n\r\nimport { zValidator } from '@hono/zod-validator';\r\nimport { Hono } from 'hono';\r\nimport z from 'zod';\r\n\r\nimport { readContract, readContractConfig } from './contract.repository';\r\n\r\nconst staticHeaders = (file: string) => ({\r\n  'Content-Type': 'application/typescript',\r\n  'Content-Disposition': \\`inline; filename=\"\\${file}\"\\`\r\n});\r\n\r\nconst contractStatic = new Hono()\r\n  .get('/contract', zValidator('query', z.object({ name: z.string(), emit: z.string() })), async (c) => {\r\n    const { name, emit } = c.req.valid('query');\r\n    const { content, file } = await readContract('${appName}', name, emit === 'true');\r\n    return c.text(content, 200, staticHeaders(file));\r\n  })\r\n\r\n  .get('/contract/config', async (c) => {\r\n    const config = await readContractConfig();\r\n    return c.json(config, 200, { 'Content-Type': 'application/json' });\r\n  });\r\n\r\nexport { contractStatic };\r\n`;\r\n\r\nexport const repositoryTemplate = `// This file is auto-generated. Do not edit manually.\r\n\r\nimport { readFile } from 'fs/promises';\r\nimport { HTTPException } from 'hono/http-exception';\r\n\r\nexport async function readContract(app: string, name: string, emit: boolean): Promise<{ content: string; file: string }> {\r\n  // This function reads a contract file for the specified app and name.\r\n  // It constructs the file path based on the app and name, and returns the content and file name.\r\n\r\n  const fileName = \\`\\${app}.contract.\\${name}\\` + (emit ? '.ts' : '.d.ts');\r\n  const contractPath = \\`./contract/export/\\${fileName}\\`;\r\n\r\n  try {\r\n    const content = await readFile(contractPath, 'utf-8');\r\n    return { content, file: fileName };\r\n  } catch (err) {\r\n    throw new HTTPException(404, {\r\n      message: \\`Contract file not found at \\${contractPath}\\`,\r\n    });\r\n  }\r\n}\r\n\r\nexport async function readContractConfig(): Promise<string> {\r\n  // This function reads the contract configuration file.\r\n  // It is used to determine fore external synchronization.\r\n\r\n  const configPath = './contract.config.json';\r\n  try {\r\n    const configContent = await readFile(configPath, 'utf-8');\r\n    return JSON.parse(configContent);\r\n  } catch (err) {\r\n    throw new HTTPException(500, {\r\n      message: \\`Failed to read contract configuration from \\${configPath}\\`,\r\n    });\r\n  }\r\n}\r\n`;\r\n\r\nexport const indexTemplate = `// This file is auto-generated. Do not edit manually.\r\n\r\nexport { contractStatic } from './contract.endpoints';\r\n`;\r\n"],"mappings":";AAAO,IAAM,oBAAoB,CAAC,YAAoB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oDAgBF,OAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAYpD,IAAM,qBAAqB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAsC3B,IAAM,gBAAgB;AAAA;AAAA;AAAA;","names":[]}