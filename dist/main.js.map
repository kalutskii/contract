{"version":3,"sources":["../src/main.ts"],"sourcesContent":["#!/usr/bin/env node\nimport { dirname, join } from 'node:path';\nimport { fileURLToPath } from 'node:url';\n\nimport { cac } from 'cac';\nimport fs from 'fs-extra';\n\nconst __dirname = dirname(fileURLToPath(import.meta.url));\nexport const commandList = ['init', 'build', 'sync', 'create-routes'] as const;\n\nasync function runModule(command: string, options: Record<string, any>) {\n  // Checks if the command is valid and exists in the command list.\n  // Also ensures that corresponding module file exists in (src/modules).\n\n  const modulePath = join(__dirname, 'modules', command, 'index.js');\n\n  if (!(await fs.pathExists(modulePath))) {\n    throw new Error(`Module for command \"${command}\" does not exist at path: ${modulePath}`);\n  }\n\n  const mod = await import(`file://${modulePath}`);\n  await mod.runCommand(options);\n}\n\n// Proceeds CLI initialization.\nconst cli = cac('contract');\n\n// Register commands dynamically.\nfor (const command of commandList) {\n  cli\n    .command(command, `Run ${command} command`)\n    .option('--ensure-sources, -u', 'Update source contract files')\n    .action((...args) => {\n      const options = args.pop();\n      return runModule(command, options);\n    });\n}\n\n// Additional help and version information.\ncli.help();\ncli.parse();\n"],"mappings":";;;AACA,SAAS,SAAS,YAAY;AAC9B,SAAS,qBAAqB;AAE9B,SAAS,WAAW;AACpB,OAAO,QAAQ;AAEf,IAAM,YAAY,QAAQ,cAAc,YAAY,GAAG,CAAC;AACjD,IAAM,cAAc,CAAC,QAAQ,SAAS,QAAQ,eAAe;AAEpE,eAAe,UAAU,SAAiB,SAA8B;AAItE,QAAM,aAAa,KAAK,WAAW,WAAW,SAAS,UAAU;AAEjE,MAAI,CAAE,MAAM,GAAG,WAAW,UAAU,GAAI;AACtC,UAAM,IAAI,MAAM,uBAAuB,OAAO,6BAA6B,UAAU,EAAE;AAAA,EACzF;AAEA,QAAM,MAAM,MAAM,OAAO,UAAU,UAAU;AAC7C,QAAM,IAAI,WAAW,OAAO;AAC9B;AAGA,IAAM,MAAM,IAAI,UAAU;AAG1B,WAAW,WAAW,aAAa;AACjC,MACG,QAAQ,SAAS,OAAO,OAAO,UAAU,EACzC,OAAO,wBAAwB,8BAA8B,EAC7D,OAAO,IAAI,SAAS;AACnB,UAAM,UAAU,KAAK,IAAI;AACzB,WAAO,UAAU,SAAS,OAAO;AAAA,EACnC,CAAC;AACL;AAGA,IAAI,KAAK;AACT,IAAI,MAAM;","names":[]}